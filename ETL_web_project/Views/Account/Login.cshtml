@model ETL_web_project.DTOs.LoginDto

@{
    ViewData["Title"] = "Login";
    Layout = null;
}

<link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />

<link rel="stylesheet" href="~/css/auth.css" asp-append-version="true" />

<div class="login-page-wrapper">
    <div class="login-card">

        @if (Context.Request.Query["reset"] == "1")
        {
            <div id="resetAlert" class="alert alert-success text-center">
                Your password reset request was received.
            </div>

            <script>
                setTimeout(() => {
                    var box = document.getElementById("resetAlert");
                    if (box) box.style.display = "none";
                }, 3000);
            </script>
        }


        <div class="text-center mb-3">
            <div class="login-brand-circle">
                <span>DW</span>
            </div>

            <h3 class="login-title mb-1">Retail DW &amp; ETL Monitor</h3>
            <p class="login-subtitle mb-0">
                Sign in to monitor ETL runs, data freshness and warehouse health.
            </p>
        </div>

        <form asp-action="Login" asp-controller="Account" method="post" class="mt-4">
            @Html.AntiForgeryToken()
            <input type="hidden" name="returnUrl" value="@ViewData["ReturnUrl"]" />

            <div asp-validation-summary="ModelOnly" class="text-danger mb-2"></div>

            <div class="form-group mb-3">
                <label asp-for="Username" class="login-label"></label>
                <input asp-for="Username" class="form-control login-input" placeholder="e.g. j.smith" />
                <span asp-validation-for="Username" class="text-danger"></span>
            </div>

            <div class="form-group mb-1">
                <label asp-for="Password" class="login-label"></label>
                <input asp-for="Password" class="form-control login-input" placeholder="Enter your password" />
                <span asp-validation-for="Password" class="text-danger"></span>
            </div>

            <div class="d-flex justify-content-between align-items-center mb-4 login-forgot">
                <span></span>
                <a asp-action="ForgotPassword" asp-controller="Account" class="login-link">
                    Forgot your password?
                </a>
            </div>

            <button type="submit" class="btn btn-login-primary w-100 mb-3">
                Sign In
            </button>

            <div class="text-center mb-2">
                <span class="login-footer-text">
                    Don’t have an account?
                    <a asp-action="Register" asp-controller="Account" class="login-link">Create one</a>
                </span>
            </div>
        </form>

        <div class="mt-3 text-center">
            <p class="login-footer-text mb-0">
                Once signed in, you can access ETL job monitoring, logs, scheduling tools and data warehouse exploration features based on your role.
            </p>
        </div>

    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
